{% extends 'blog/base.html' %}

{% block title %}{{ post.title }} - My Blog{% endblock %}
{% block description %}{{ post.content|truncatewords:30|striptags }}{% endblock %}

{% block content %}
<article class="max-w-3xl">
    <!-- Back Button -->
    <nav aria-label="Breadcrumb" class="mb-12">
        <a href="{% url 'blog:post_list' %}"
            class="inline-flex items-center gap-1.5 text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors duration-150 group">
            <svg class="w-4 h-4 transform group-hover:-translate-x-0.5 transition-transform duration-150" fill="none"
                stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5"></path>
            </svg>
            <span>Back to all posts</span>
        </a>
    </nav>

    <!-- Post Header -->
    <header class="mb-12 space-y-6">
        {% if post.image %}
        <div class="mb-8 -mx-4 sm:-mx-6 md:-mx-8 lg:mx-0">
            <img src="{{ post.image.url }}" alt="{{ post.title }}"
                class="w-full h-auto rounded-lg object-cover shadow-lg">
        </div>
        {% endif %}
        <h1
            class="text-4xl sm:text-5xl md:text-6xl font-semibold text-gray-900 tracking-tight leading-tight text-balance">
            {{ post.title }}
        </h1>
        <div class="flex flex-wrap items-center gap-4 pb-8 border-b border-gray-200/60">
            <time datetime="{{ post.created_at|date:'Y-m-d' }}" class="flex items-center gap-1.5 text-sm text-gray-600">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5">
                    </path>
                </svg>
                {{ post.created_at|date:"F d, Y" }}
            </time>
            {% if post.updated_at != post.created_at %}
            <span class="text-gray-300">·</span>
            <time datetime="{{ post.updated_at|date:'Y-m-d' }}" class="flex items-center gap-1.5 text-sm text-gray-600">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99">
                    </path>
                </svg>
                Updated {{ post.updated_at|date:"F d, Y" }}
            </time>
            {% endif %}
            <span class="text-gray-300">·</span>
            <span class="text-sm text-gray-600">{{ post.get_reading_time }} min read</span>
        </div>
    </header>

    <!-- Post Content -->
    <div class="prose prose-lg max-w-none">
        <div class="text-gray-700 leading-relaxed space-y-6">
            <div
                class="prose-headings:text-gray-900 prose-headings:font-semibold prose-headings:tracking-tight prose-h1:text-3xl prose-h2:text-2xl prose-h3:text-xl prose-p:text-gray-700 prose-p:leading-relaxed prose-p:mb-6 prose-a:text-gray-900 prose-a:font-medium prose-a:underline prose-a:underline-offset-2 prose-a:decoration-gray-300 hover:prose-a:decoration-gray-900 prose-strong:text-gray-900 prose-strong:font-semibold prose-ul:text-gray-700 prose-ol:text-gray-700 prose-li:text-gray-700 prose-code:text-gray-900 prose-code:bg-gray-100 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:text-sm prose-code:font-mono prose-blockquote:border-l-2 prose-blockquote:border-gray-300 prose-blockquote:pl-4 prose-blockquote:italic prose-blockquote:text-gray-600 prose-hr:border-gray-200">
                {{ post.content|linebreaks }}
            </div>
        </div>
    </div>

    <!-- Footer Actions -->
    <div class="mt-16 pt-8 border-t border-gray-200/60">
        <a href="{% url 'blog:post_list' %}"
            class="inline-flex items-center gap-1.5 text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors duration-150 group">
            <svg class="w-4 h-4 transform group-hover:-translate-x-0.5 transition-transform duration-150" fill="none"
                stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5"></path>
            </svg>
            <span>Back to all posts</span>
        </a>
    </div>
</article>
{% endblock %}